SISTEMA DE ANÁLISIS DE MIRADA Y PUPILAS
========================================

INSTALACIÓN
-----------

1. Crear entorno virtual:
   Windows: python -m venv venv && venv\Scripts\activate
   Linux/Mac: python -m venv venv && source venv/bin/activate

2. Instalar dependencias:
   pip install -r requirements_gaze.txt

3. Ejecutar:
   python main_gaze.py


EJECUCIÓN
---------
python main_gaze.py


CONTROLES
---------
- 'q': Salir del programa
- 'd': Activar/desactivar detalles de emociones
- 'g': Activar/desactivar análisis de mirada


FUNCIONALIDADES
---------------
1. Detección de ojos en tiempo real
2. Detección de pupilas
3. Determinación si el usuario mira a la cámara
4. Dirección de la mirada (centro, izquierda, derecha, arriba, abajo)
5. Análisis combinado con emociones


ARQUITECTURA
------------
1. face_detector.py
   - Detecta rostros usando Haar Cascade

2. gaze_detector.py
   - Detecta ojos usando Haar Cascade
   - Localiza pupilas mediante thresholding
   - Calcula dirección de mirada
   - Determina si mira a la cámara

3. deepface_classifier.py (o el que prefieras)
   - Analiza emociones faciales

4. main_gaze.py
   - Integra todo el sistema
   - Muestra resultados en tiempo real


CÓMO FUNCIONA
-------------
1. Detección de ojos:
   - Usa Haar Cascade para localizar ojos en ROI facial

2. Detección de pupilas:
   - Aplica thresholding binario inverso
   - Encuentra contornos
   - Calcula centro de masa del contorno más grande

3. Análisis de mirada:
   - Compara posición de pupila con centro del ojo
   - Si está centrada -> Mirando a cámara
   - Si está desplazada -> Calcula dirección


DIRECCIONES DE MIRADA
---------------------
- centro: Usuario mira directamente a la cámara
- izquierda: Mira hacia su izquierda
- derecha: Mira hacia su derecha
- arriba: Mira hacia arriba
- abajo: Mira hacia abajo
- desconocido: No se pudo determinar


INDICADORES VISUALES
--------------------
- Rectángulo amarillo: Ojos detectados
- Círculo verde: Pupila detectada
- Texto verde "MIRANDO CAMARA": Usuario atento
- Texto rojo "NO MIRANDO": Usuario no mira


SOLUCIÓN DE PROBLEMAS
----------------------
Error: "No se detectan los ojos"
  - Mejora la iluminación
  - Ajusta threshold en gaze_detector.py (línea 9)
  - Asegúrate que los ojos estén abiertos

Error: "Detección errática de pupilas"
  - Evita reflejos directos en los ojos
  - Ajusta el threshold (valor por defecto: 70)
  - Mejora las condiciones de iluminación

Error: "No module named 'cv2'"
  pip install opencv-python

Falsos positivos en detección
  - Aumenta minNeighbors en detect_eyes (línea 14)
  - Ajusta minSize para ojos más grandes


OPTIMIZACIÓN
------------
Para mejor rendimiento:
1. Ajusta threshold según tu iluminación (50-90)
2. Modifica threshold_x/threshold_y para sensibilidad
3. Usa blur para reducir ruido en detección de pupilas


ALTERNATIVAS AVANZADAS
----------------------
Para aplicaciones más robustas considera:
- GazeTracking library (github.com/antoinelame/GazeTracking)
- MediaPipe Face Mesh (incluye iris tracking)
- OpenFace 2.0 (landmarks de 68 puntos)
- Pupil Labs (eye tracking profesional)


DOCUMENTACIÓN
-------------
OpenCV Eye Detection: https://docs.opencv.org/
Haar Cascades: https://github.com/opencv/opencv/tree/master/data/haarcascades
GazeTracking: https://github.com/antoinelame/GazeTracking
